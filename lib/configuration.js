"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get assertConfigurationFileExists () {
        return assertConfigurationFileExists;
    },
    get checkConfigurationFileExists () {
        return checkConfigurationFileExists;
    },
    get createConfigurationFile () {
        return createConfigurationFile;
    },
    get migrateConfigurationFile () {
        return migrateConfigurationFile;
    },
    get removeIdentityToken () {
        return removeIdentityToken;
    },
    get retrieveHost () {
        return retrieveHost;
    },
    get retrieveIdentityToken () {
        return retrieveIdentityToken;
    },
    get retrieveOptions () {
        return retrieveOptions;
    },
    get retrieveShellCommands () {
        return retrieveShellCommands;
    },
    get updateIdentityToken () {
        return updateIdentityToken;
    },
    get updateOptions () {
        return updateOptions;
    },
    get updateShellCommands () {
        return updateShellCommands;
    }
});
const _necessary = require("necessary");
const _constants = require("./constants");
const _version_5_1 = require("./configuration/version_5_1");
const _version_2_0 = require("./configuration/version_2_0");
const _version_5_0 = require("./configuration/version_5_0");
const _messages = require("./messages");
const _versions = require("./versions");
const { rc } = _necessary.configurationUtilities, { migrate } = _necessary.versionUtilities, { setRCBaseExtension, checkRCFileExists, updateRCFile, writeRCFile, readRCFile } = rc;
const rcBaseExtension = _constants.OPEN; ///
setRCBaseExtension(rcBaseExtension);
function retrieveHost() {
    const configuration = readConfigurationFile(), { host } = configuration;
    return host;
}
function retrieveOptions() {
    const configuration = readConfigurationFile(), { options } = configuration;
    return options;
}
function retrieveShellCommands() {
    const configuration = readConfigurationFile(), { shellCommands } = configuration;
    return shellCommands;
}
function retrieveIdentityToken() {
    const configuration = readConfigurationFile(), { identityToken } = configuration;
    return identityToken;
}
function updateOptions(options) {
    updateConfigurationFile({
        options
    });
}
function updateShellCommands(shellCommands) {
    updateConfigurationFile({
        shellCommands
    });
}
function updateIdentityToken(identityToken) {
    updateConfigurationFile({
        identityToken
    });
}
function removeIdentityToken() {
    updateConfigurationFile(null, "identityToken");
}
function createConfigurationFile() {
    const configuration = (0, _version_5_1.createConfiguration)(), json = configuration; ///
    writeRCFile(json);
}
function migrateConfigurationFile() {
    assertConfigurationFileExists();
    let json = readRCFile();
    const migrationMap = {
        [_versions.VERSION_1_5]: _version_2_0.migrateConfigurationToVersion_2_0,
        [_versions.VERSION_2_0]: _version_5_0.migrateConfigurationToVersion_5_0,
        [_versions.VERSION_5_0]: _version_5_1.migrateConfigurationToVersion_5_1
    }, latestVersion = _versions.VERSION_5_1;
    json = migrate(json, migrationMap, latestVersion);
    writeRCFile(json);
}
function checkConfigurationFileExists() {
    const rcFileExists = checkRCFileExists(), configurationFileExists = rcFileExists; ///
    return configurationFileExists;
}
function assertConfigurationFileExists() {
    const configurationFileExists = checkConfigurationFileExists();
    if (!configurationFileExists) {
        console.log(_messages.CONFIGURATION_FILE_DOES_NOT_EXIST_MESSAGE);
        process.exit(1);
    }
}
function readConfigurationFile() {
    assertConfigurationFileExists();
    const json = readRCFile(), configuration = json; ///
    return configuration;
}
function writeConfigurationFile(configuration) {
    assertConfigurationFileExists();
    const json = configuration; ///
    writeRCFile(json);
}
function updateConfigurationFile(addedConfiguration, ...deleteConfigurationNames) {
    assertConfigurationFileExists();
    const addedProperties = addedConfiguration, deletedPropertyNames = deleteConfigurationNames; ///
    updateRCFile(addedProperties, ...deletedPropertyNames);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWd1cmF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyB2ZXJzaW9uVXRpbGl0aWVzLCBjb25maWd1cmF0aW9uVXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgeyBPUEVOIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBjcmVhdGVDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4vY29uZmlndXJhdGlvbi92ZXJzaW9uXzVfMVwiO1xuaW1wb3J0IHsgbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMl8wIH0gZnJvbSBcIi4vY29uZmlndXJhdGlvbi92ZXJzaW9uXzJfMFwiO1xuaW1wb3J0IHsgbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fNV8wIH0gZnJvbSBcIi4vY29uZmlndXJhdGlvbi92ZXJzaW9uXzVfMFwiO1xuaW1wb3J0IHsgbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fNV8xIH0gZnJvbSBcIi4vY29uZmlndXJhdGlvbi92ZXJzaW9uXzVfMVwiO1xuaW1wb3J0IHsgQ09ORklHVVJBVElPTl9GSUxFX0RPRVNfTk9UX0VYSVNUX01FU1NBR0UgfSBmcm9tIFwiLi9tZXNzYWdlc1wiO1xuaW1wb3J0IHsgVkVSU0lPTl8xXzUsIFZFUlNJT05fMl8wLCBWRVJTSU9OXzVfMCwgVkVSU0lPTl81XzEgfSBmcm9tIFwiLi92ZXJzaW9uc1wiO1xuXG5jb25zdCB7IHJjIH0gPSBjb25maWd1cmF0aW9uVXRpbGl0aWVzLFxuICAgICAgeyBtaWdyYXRlIH0gPSB2ZXJzaW9uVXRpbGl0aWVzLFxuICAgICAgeyBzZXRSQ0Jhc2VFeHRlbnNpb24sIGNoZWNrUkNGaWxlRXhpc3RzLCB1cGRhdGVSQ0ZpbGUsIHdyaXRlUkNGaWxlLCByZWFkUkNGaWxlIH0gPSByYztcblxuY29uc3QgcmNCYXNlRXh0ZW5zaW9uID0gT1BFTjsgLy8vXG5cbnNldFJDQmFzZUV4dGVuc2lvbihyY0Jhc2VFeHRlbnNpb24pO1xuXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmVIb3N0KCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gcmVhZENvbmZpZ3VyYXRpb25GaWxlKCksXG4gICAgICAgIHsgaG9zdCB9ID0gY29uZmlndXJhdGlvbjtcblxuICByZXR1cm4gaG9zdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldHJpZXZlT3B0aW9ucygpIHtcbiAgY29uc3QgY29uZmlndXJhdGlvbiA9IHJlYWRDb25maWd1cmF0aW9uRmlsZSgpLFxuICAgICAgICB7IG9wdGlvbnMgfSA9IGNvbmZpZ3VyYXRpb247XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZVNoZWxsQ29tbWFuZHMoKSB7XG4gIGNvbnN0IGNvbmZpZ3VyYXRpb24gPSByZWFkQ29uZmlndXJhdGlvbkZpbGUoKSxcbiAgICAgICAgeyBzaGVsbENvbW1hbmRzIH0gPSBjb25maWd1cmF0aW9uO1xuXG4gIHJldHVybiBzaGVsbENvbW1hbmRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmVJZGVudGl0eVRva2VuKCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gcmVhZENvbmZpZ3VyYXRpb25GaWxlKCksXG4gICAgICAgIHsgaWRlbnRpdHlUb2tlbiB9ID0gY29uZmlndXJhdGlvbjtcblxuICByZXR1cm4gaWRlbnRpdHlUb2tlbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMob3B0aW9ucykge1xuICB1cGRhdGVDb25maWd1cmF0aW9uRmlsZSh7XG4gICAgb3B0aW9uc1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNoZWxsQ29tbWFuZHMoc2hlbGxDb21tYW5kcykge1xuICB1cGRhdGVDb25maWd1cmF0aW9uRmlsZSh7XG4gICAgc2hlbGxDb21tYW5kc1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUlkZW50aXR5VG9rZW4oaWRlbnRpdHlUb2tlbikge1xuICB1cGRhdGVDb25maWd1cmF0aW9uRmlsZSh7XG4gICAgaWRlbnRpdHlUb2tlblxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUlkZW50aXR5VG9rZW4oKSB7XG4gIHVwZGF0ZUNvbmZpZ3VyYXRpb25GaWxlKG51bGwsIFwiaWRlbnRpdHlUb2tlblwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbmZpZ3VyYXRpb25GaWxlKCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uID0gY3JlYXRlQ29uZmlndXJhdGlvbigpLFxuICAgICAgICBqc29uID0gY29uZmlndXJhdGlvbjsgLy8vXG5cbiAgd3JpdGVSQ0ZpbGUoanNvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtaWdyYXRlQ29uZmlndXJhdGlvbkZpbGUoKSB7XG4gIGFzc2VydENvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKCk7XG5cbiAgbGV0IGpzb24gPSByZWFkUkNGaWxlKCk7XG5cbiAgY29uc3QgbWlncmF0aW9uTWFwID0ge1xuICAgICAgICAgIFsgVkVSU0lPTl8xXzUgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMl8wLFxuICAgICAgICAgIFsgVkVSU0lPTl8yXzAgXTogbWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fNV8wLFxuICAgICAgICAgIFsgVkVSU0lPTl81XzAgXSA6bWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fNV8xXG4gICAgICAgIH0sXG4gICAgICAgIGxhdGVzdFZlcnNpb24gPSBWRVJTSU9OXzVfMTtcblxuICBqc29uID0gbWlncmF0ZShqc29uLCBtaWdyYXRpb25NYXAsIGxhdGVzdFZlcnNpb24pO1xuXG4gIHdyaXRlUkNGaWxlKGpzb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tDb25maWd1cmF0aW9uRmlsZUV4aXN0cygpIHtcbiAgY29uc3QgcmNGaWxlRXhpc3RzID0gY2hlY2tSQ0ZpbGVFeGlzdHMoKSxcbiAgICAgICAgY29uZmlndXJhdGlvbkZpbGVFeGlzdHMgPSByY0ZpbGVFeGlzdHM7IC8vL1xuXG4gIHJldHVybiBjb25maWd1cmF0aW9uRmlsZUV4aXN0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydENvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKCkge1xuICBjb25zdCBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBpZiAoIWNvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKSB7XG4gICAgY29uc29sZS5sb2coQ09ORklHVVJBVElPTl9GSUxFX0RPRVNfTk9UX0VYSVNUX01FU1NBR0UpO1xuXG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRDb25maWd1cmF0aW9uRmlsZSgpIHtcbiAgYXNzZXJ0Q29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBjb25zdCBqc29uID0gcmVhZFJDRmlsZSgpLFxuICAgICAgICBjb25maWd1cmF0aW9uID0ganNvbjsgLy8vXG5cbiAgcmV0dXJuIGNvbmZpZ3VyYXRpb247XG59XG5cbmZ1bmN0aW9uIHdyaXRlQ29uZmlndXJhdGlvbkZpbGUoY29uZmlndXJhdGlvbikge1xuICBhc3NlcnRDb25maWd1cmF0aW9uRmlsZUV4aXN0cygpO1xuXG4gIGNvbnN0IGpzb24gPSBjb25maWd1cmF0aW9uOyAvLy9cblxuICB3cml0ZVJDRmlsZShqc29uKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ29uZmlndXJhdGlvbkZpbGUoYWRkZWRDb25maWd1cmF0aW9uLCAuLi5kZWxldGVDb25maWd1cmF0aW9uTmFtZXMpIHtcbiAgYXNzZXJ0Q29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBjb25zdCBhZGRlZFByb3BlcnRpZXMgPSBhZGRlZENvbmZpZ3VyYXRpb24sIC8vL1xuICAgICAgICBkZWxldGVkUHJvcGVydHlOYW1lcyA9IGRlbGV0ZUNvbmZpZ3VyYXRpb25OYW1lczsgIC8vL1xuXG4gIHVwZGF0ZVJDRmlsZShhZGRlZFByb3BlcnRpZXMsIC4uLmRlbGV0ZWRQcm9wZXJ0eU5hbWVzKTtcbn1cbiJdLCJuYW1lcyI6WyJhc3NlcnRDb25maWd1cmF0aW9uRmlsZUV4aXN0cyIsImNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMiLCJjcmVhdGVDb25maWd1cmF0aW9uRmlsZSIsIm1pZ3JhdGVDb25maWd1cmF0aW9uRmlsZSIsInJlbW92ZUlkZW50aXR5VG9rZW4iLCJyZXRyaWV2ZUhvc3QiLCJyZXRyaWV2ZUlkZW50aXR5VG9rZW4iLCJyZXRyaWV2ZU9wdGlvbnMiLCJyZXRyaWV2ZVNoZWxsQ29tbWFuZHMiLCJ1cGRhdGVJZGVudGl0eVRva2VuIiwidXBkYXRlT3B0aW9ucyIsInVwZGF0ZVNoZWxsQ29tbWFuZHMiLCJyYyIsImNvbmZpZ3VyYXRpb25VdGlsaXRpZXMiLCJtaWdyYXRlIiwidmVyc2lvblV0aWxpdGllcyIsInNldFJDQmFzZUV4dGVuc2lvbiIsImNoZWNrUkNGaWxlRXhpc3RzIiwidXBkYXRlUkNGaWxlIiwid3JpdGVSQ0ZpbGUiLCJyZWFkUkNGaWxlIiwicmNCYXNlRXh0ZW5zaW9uIiwiT1BFTiIsImNvbmZpZ3VyYXRpb24iLCJyZWFkQ29uZmlndXJhdGlvbkZpbGUiLCJob3N0Iiwib3B0aW9ucyIsInNoZWxsQ29tbWFuZHMiLCJpZGVudGl0eVRva2VuIiwidXBkYXRlQ29uZmlndXJhdGlvbkZpbGUiLCJjcmVhdGVDb25maWd1cmF0aW9uIiwianNvbiIsIm1pZ3JhdGlvbk1hcCIsIlZFUlNJT05fMV81IiwibWlncmF0ZUNvbmZpZ3VyYXRpb25Ub1ZlcnNpb25fMl8wIiwiVkVSU0lPTl8yXzAiLCJtaWdyYXRlQ29uZmlndXJhdGlvblRvVmVyc2lvbl81XzAiLCJWRVJTSU9OXzVfMCIsIm1pZ3JhdGVDb25maWd1cmF0aW9uVG9WZXJzaW9uXzVfMSIsImxhdGVzdFZlcnNpb24iLCJWRVJTSU9OXzVfMSIsInJjRmlsZUV4aXN0cyIsImNvbmZpZ3VyYXRpb25GaWxlRXhpc3RzIiwiY29uc29sZSIsImxvZyIsIkNPTkZJR1VSQVRJT05fRklMRV9ET0VTX05PVF9FWElTVF9NRVNTQUdFIiwicHJvY2VzcyIsImV4aXQiLCJ3cml0ZUNvbmZpZ3VyYXRpb25GaWxlIiwiYWRkZWRDb25maWd1cmF0aW9uIiwiZGVsZXRlQ29uZmlndXJhdGlvbk5hbWVzIiwiYWRkZWRQcm9wZXJ0aWVzIiwiZGVsZXRlZFByb3BlcnR5TmFtZXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztRQXFHZ0JBO2VBQUFBOztRQVBBQztlQUFBQTs7UUF4QkFDO2VBQUFBOztRQU9BQztlQUFBQTs7UUFYQUM7ZUFBQUE7O1FBOUNBQztlQUFBQTs7UUFxQkFDO2VBQUFBOztRQWRBQztlQUFBQTs7UUFPQUM7ZUFBQUE7O1FBMEJBQztlQUFBQTs7UUFaQUM7ZUFBQUE7O1FBTUFDO2VBQUFBOzs7MkJBcER5QzsyQkFFcEM7NkJBQ2U7NkJBQ2M7NkJBQ0E7MEJBRVE7MEJBQ1M7QUFFbkUsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBR0MsaUNBQXNCLEVBQy9CLEVBQUVDLE9BQU8sRUFBRSxHQUFHQywyQkFBZ0IsRUFDOUIsRUFBRUMsa0JBQWtCLEVBQUVDLGlCQUFpQixFQUFFQyxZQUFZLEVBQUVDLFdBQVcsRUFBRUMsVUFBVSxFQUFFLEdBQUdSO0FBRXpGLE1BQU1TLGtCQUFrQkMsZUFBSSxFQUFFLEdBQUc7QUFFakNOLG1CQUFtQks7QUFFWixTQUFTaEI7SUFDZCxNQUFNa0IsZ0JBQWdCQyx5QkFDaEIsRUFBRUMsSUFBSSxFQUFFLEdBQUdGO0lBRWpCLE9BQU9FO0FBQ1Q7QUFFTyxTQUFTbEI7SUFDZCxNQUFNZ0IsZ0JBQWdCQyx5QkFDaEIsRUFBRUUsT0FBTyxFQUFFLEdBQUdIO0lBRXBCLE9BQU9HO0FBQ1Q7QUFFTyxTQUFTbEI7SUFDZCxNQUFNZSxnQkFBZ0JDLHlCQUNoQixFQUFFRyxhQUFhLEVBQUUsR0FBR0o7SUFFMUIsT0FBT0k7QUFDVDtBQUVPLFNBQVNyQjtJQUNkLE1BQU1pQixnQkFBZ0JDLHlCQUNoQixFQUFFSSxhQUFhLEVBQUUsR0FBR0w7SUFFMUIsT0FBT0s7QUFDVDtBQUVPLFNBQVNsQixjQUFjZ0IsT0FBTztJQUNuQ0csd0JBQXdCO1FBQ3RCSDtJQUNGO0FBQ0Y7QUFFTyxTQUFTZixvQkFBb0JnQixhQUFhO0lBQy9DRSx3QkFBd0I7UUFDdEJGO0lBQ0Y7QUFDRjtBQUVPLFNBQVNsQixvQkFBb0JtQixhQUFhO0lBQy9DQyx3QkFBd0I7UUFDdEJEO0lBQ0Y7QUFDRjtBQUVPLFNBQVN4QjtJQUNkeUIsd0JBQXdCLE1BQU07QUFDaEM7QUFFTyxTQUFTM0I7SUFDZCxNQUFNcUIsZ0JBQWdCTyxJQUFBQSxnQ0FBbUIsS0FDbkNDLE9BQU9SLGVBQWUsR0FBRztJQUUvQkosWUFBWVk7QUFDZDtBQUVPLFNBQVM1QjtJQUNkSDtJQUVBLElBQUkrQixPQUFPWDtJQUVYLE1BQU1ZLGVBQWU7UUFDYixDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztRQUNsRCxDQUFFQyxxQkFBVyxDQUFFLEVBQUVDLDhDQUFpQztJQUNwRCxHQUNBQyxnQkFBZ0JDLHFCQUFXO0lBRWpDVCxPQUFPakIsUUFBUWlCLE1BQU1DLGNBQWNPO0lBRW5DcEIsWUFBWVk7QUFDZDtBQUVPLFNBQVM5QjtJQUNkLE1BQU13QyxlQUFleEIscUJBQ2Z5QiwwQkFBMEJELGNBQWMsR0FBRztJQUVqRCxPQUFPQztBQUNUO0FBRU8sU0FBUzFDO0lBQ2QsTUFBTTBDLDBCQUEwQnpDO0lBRWhDLElBQUksQ0FBQ3lDLHlCQUF5QjtRQUM1QkMsUUFBUUMsR0FBRyxDQUFDQyxtREFBeUM7UUFFckRDLFFBQVFDLElBQUksQ0FBQztJQUNmO0FBQ0Y7QUFFQSxTQUFTdkI7SUFDUHhCO0lBRUEsTUFBTStCLE9BQU9YLGNBQ1BHLGdCQUFnQlEsTUFBTSxHQUFHO0lBRS9CLE9BQU9SO0FBQ1Q7QUFFQSxTQUFTeUIsdUJBQXVCekIsYUFBYTtJQUMzQ3ZCO0lBRUEsTUFBTStCLE9BQU9SLGVBQWUsR0FBRztJQUUvQkosWUFBWVk7QUFDZDtBQUVBLFNBQVNGLHdCQUF3Qm9CLGtCQUFrQixFQUFFLEdBQUdDLHdCQUF3QjtJQUM5RWxEO0lBRUEsTUFBTW1ELGtCQUFrQkYsb0JBQ2xCRyx1QkFBdUJGLDBCQUEyQixHQUFHO0lBRTNEaEMsYUFBYWlDLG9CQUFvQkM7QUFDbkMifQ==