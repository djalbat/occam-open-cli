'use strict';

var prompt = require('../prompt'),
    validate = require('../validate'),
    messages = require('../messages');

var validateConfirmationCode = validate.validateConfirmationCode,
    invalidConfirmationCodeMessage = messages.invalidConfirmationCodeMessage;


function confirmationCodeCallback(next, done, context) {
  var description = 'Confirmation code: ',
      validationFunction = validateConfirmationCode,
      errorMessage = invalidConfirmationCodeMessage,
      attempts = 3,
      hidden = false,
      options = {
    description: description,
    validationFunction: validationFunction,
    errorMessage: errorMessage,
    attempts: attempts,
    hidden: hidden
  };

  prompt(options, function (confirmationCode) {
    var valid = confirmationCode !== null;

    if (valid) {
      Object.assign(context, {
        confirmationCode: confirmationCode
      });

      next();

      return;
    }

    done();
  });
}

module.exports = confirmationCodeCallback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9jYWxsYmFjay9jb25maXJtYXRpb25Db2RlLmpzIl0sIm5hbWVzIjpbInByb21wdCIsInJlcXVpcmUiLCJ2YWxpZGF0ZSIsIm1lc3NhZ2VzIiwidmFsaWRhdGVDb25maXJtYXRpb25Db2RlIiwiaW52YWxpZENvbmZpcm1hdGlvbkNvZGVNZXNzYWdlIiwiY29uZmlybWF0aW9uQ29kZUNhbGxiYWNrIiwibmV4dCIsImRvbmUiLCJjb250ZXh0IiwiZGVzY3JpcHRpb24iLCJ2YWxpZGF0aW9uRnVuY3Rpb24iLCJlcnJvck1lc3NhZ2UiLCJhdHRlbXB0cyIsImhpZGRlbiIsIm9wdGlvbnMiLCJjb25maXJtYXRpb25Db2RlIiwidmFsaWQiLCJPYmplY3QiLCJhc3NpZ24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxTQUFTQyxRQUFRLFdBQVIsQ0FBZjtBQUFBLElBQ01DLFdBQVdELFFBQVEsYUFBUixDQURqQjtBQUFBLElBRU1FLFdBQVdGLFFBQVEsYUFBUixDQUZqQjs7QUFJTSxJQUFFRyx3QkFBRixHQUErQkYsUUFBL0IsQ0FBRUUsd0JBQUY7QUFBQSxJQUNFQyw4QkFERixHQUNxQ0YsUUFEckMsQ0FDRUUsOEJBREY7OztBQUdOLFNBQVNDLHdCQUFULENBQWtDQyxJQUFsQyxFQUF3Q0MsSUFBeEMsRUFBOENDLE9BQTlDLEVBQXVEO0FBQ3JELE1BQU1DLGNBQWMscUJBQXBCO0FBQUEsTUFDTUMscUJBQXFCUCx3QkFEM0I7QUFBQSxNQUVNUSxlQUFlUCw4QkFGckI7QUFBQSxNQUdNUSxXQUFXLENBSGpCO0FBQUEsTUFJTUMsU0FBUyxLQUpmO0FBQUEsTUFLTUMsVUFBVTtBQUNSTCxpQkFBYUEsV0FETDtBQUVSQyx3QkFBb0JBLGtCQUZaO0FBR1JDLGtCQUFjQSxZQUhOO0FBSVJDLGNBQVVBLFFBSkY7QUFLUkMsWUFBUUE7QUFMQSxHQUxoQjs7QUFhQWQsU0FBT2UsT0FBUCxFQUFnQixVQUFTQyxnQkFBVCxFQUEyQjtBQUN6QyxRQUFNQyxRQUFTRCxxQkFBcUIsSUFBcEM7O0FBRUEsUUFBSUMsS0FBSixFQUFXO0FBQ1RDLGFBQU9DLE1BQVAsQ0FBY1YsT0FBZCxFQUF1QjtBQUNyQk8sMEJBQWtCQTtBQURHLE9BQXZCOztBQUlBVDs7QUFFQTtBQUNEOztBQUVEQztBQUNELEdBZEQ7QUFlRDs7QUFFRFksT0FBT0MsT0FBUCxHQUFpQmYsd0JBQWpCIiwiZmlsZSI6ImNvbmZpcm1hdGlvbkNvZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHByb21wdCA9IHJlcXVpcmUoJy4uL3Byb21wdCcpLFxuICAgICAgdmFsaWRhdGUgPSByZXF1aXJlKCcuLi92YWxpZGF0ZScpLFxuICAgICAgbWVzc2FnZXMgPSByZXF1aXJlKCcuLi9tZXNzYWdlcycpO1xuXG5jb25zdCB7IHZhbGlkYXRlQ29uZmlybWF0aW9uQ29kZSB9ID0gdmFsaWRhdGUsXG4gICAgICB7IGludmFsaWRDb25maXJtYXRpb25Db2RlTWVzc2FnZSB9ID0gbWVzc2FnZXM7XG5cbmZ1bmN0aW9uIGNvbmZpcm1hdGlvbkNvZGVDYWxsYmFjayhuZXh0LCBkb25lLCBjb250ZXh0KSB7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gJ0NvbmZpcm1hdGlvbiBjb2RlOiAnLFxuICAgICAgICB2YWxpZGF0aW9uRnVuY3Rpb24gPSB2YWxpZGF0ZUNvbmZpcm1hdGlvbkNvZGUsICAgICAgICBcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gaW52YWxpZENvbmZpcm1hdGlvbkNvZGVNZXNzYWdlLFxuICAgICAgICBhdHRlbXB0cyA9IDMsXG4gICAgICAgIGhpZGRlbiA9IGZhbHNlLFxuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICB2YWxpZGF0aW9uRnVuY3Rpb246IHZhbGlkYXRpb25GdW5jdGlvbixcbiAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICAgICAgICBhdHRlbXB0czogYXR0ZW1wdHMsXG4gICAgICAgICAgaGlkZGVuOiBoaWRkZW5cbiAgICAgICAgfTtcblxuICBwcm9tcHQob3B0aW9ucywgZnVuY3Rpb24oY29uZmlybWF0aW9uQ29kZSkge1xuICAgIGNvbnN0IHZhbGlkID0gKGNvbmZpcm1hdGlvbkNvZGUgIT09IG51bGwpO1xuXG4gICAgaWYgKHZhbGlkKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGNvbnRleHQsIHtcbiAgICAgICAgY29uZmlybWF0aW9uQ29kZTogY29uZmlybWF0aW9uQ29kZVxuICAgICAgfSk7XG5cbiAgICAgIG5leHQoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRvbmUoKTtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29uZmlybWF0aW9uQ29kZUNhbGxiYWNrO1xuIl19