'use strict';

var prompt = require('../prompt'),
    validate = require('../validate'),
    messages = require('../messages');

var validateConfirmationCode = validate.validateConfirmationCode,
    invalidConfirmationCodeMessage = messages.invalidConfirmationCodeMessage;


function confirmationCodeCallback(next, done, context) {
  var description = 'Confirmation code: ',
      validationFunction = validateConfirmationCode,
      errorMessage = invalidConfirmationCodeMessage,
      attempts = 3,
      hidden = false,
      options = {
    description: description,
    validationFunction: validationFunction,
    errorMessage: errorMessage,
    attempts: attempts,
    hidden: hidden
  };

  prompt(options, function (confirmationCode) {
    var valid = confirmationCode !== null;

    if (valid) {
      Object.assign(context, {
        confirmationCode: confirmationCode
      });

      next();
    } else {
      done();
    }
  });
}

module.exports = confirmationCodeCallback;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2VzNi9jYWxsYmFjay9jb25maXJtYXRpb25Db2RlLmpzIl0sIm5hbWVzIjpbInByb21wdCIsInJlcXVpcmUiLCJ2YWxpZGF0ZSIsIm1lc3NhZ2VzIiwidmFsaWRhdGVDb25maXJtYXRpb25Db2RlIiwiaW52YWxpZENvbmZpcm1hdGlvbkNvZGVNZXNzYWdlIiwiY29uZmlybWF0aW9uQ29kZUNhbGxiYWNrIiwibmV4dCIsImRvbmUiLCJjb250ZXh0IiwiZGVzY3JpcHRpb24iLCJ2YWxpZGF0aW9uRnVuY3Rpb24iLCJlcnJvck1lc3NhZ2UiLCJhdHRlbXB0cyIsImhpZGRlbiIsIm9wdGlvbnMiLCJjb25maXJtYXRpb25Db2RlIiwidmFsaWQiLCJPYmplY3QiLCJhc3NpZ24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFNQSxTQUFTQyxRQUFRLFdBQVIsQ0FBZjtBQUFBLElBQ01DLFdBQVdELFFBQVEsYUFBUixDQURqQjtBQUFBLElBRU1FLFdBQVdGLFFBQVEsYUFBUixDQUZqQjs7QUFJTSxJQUFFRyx3QkFBRixHQUErQkYsUUFBL0IsQ0FBRUUsd0JBQUY7QUFBQSxJQUNFQyw4QkFERixHQUNxQ0YsUUFEckMsQ0FDRUUsOEJBREY7OztBQUdOLFNBQVNDLHdCQUFULENBQWtDQyxJQUFsQyxFQUF3Q0MsSUFBeEMsRUFBOENDLE9BQTlDLEVBQXVEO0FBQ3JELE1BQU1DLGNBQWMscUJBQXBCO0FBQUEsTUFDTUMscUJBQXFCUCx3QkFEM0I7QUFBQSxNQUVNUSxlQUFlUCw4QkFGckI7QUFBQSxNQUdNUSxXQUFXLENBSGpCO0FBQUEsTUFJTUMsU0FBUyxLQUpmO0FBQUEsTUFLTUMsVUFBVTtBQUNSTCxpQkFBYUEsV0FETDtBQUVSQyx3QkFBb0JBLGtCQUZaO0FBR1JDLGtCQUFjQSxZQUhOO0FBSVJDLGNBQVVBLFFBSkY7QUFLUkMsWUFBUUE7QUFMQSxHQUxoQjs7QUFhQWQsU0FBT2UsT0FBUCxFQUFnQixVQUFTQyxnQkFBVCxFQUEyQjtBQUN6QyxRQUFNQyxRQUFTRCxxQkFBcUIsSUFBcEM7O0FBRUEsUUFBSUMsS0FBSixFQUFXO0FBQ1RDLGFBQU9DLE1BQVAsQ0FBY1YsT0FBZCxFQUF1QjtBQUNyQk8sMEJBQWtCQTtBQURHLE9BQXZCOztBQUlBVDtBQUNELEtBTkQsTUFNTztBQUNMQztBQUNEO0FBQ0YsR0FaRDtBQWFEOztBQUVEWSxPQUFPQyxPQUFQLEdBQWlCZix3QkFBakIiLCJmaWxlIjoiY29uZmlybWF0aW9uQ29kZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcHJvbXB0ID0gcmVxdWlyZSgnLi4vcHJvbXB0JyksXG4gICAgICB2YWxpZGF0ZSA9IHJlcXVpcmUoJy4uL3ZhbGlkYXRlJyksXG4gICAgICBtZXNzYWdlcyA9IHJlcXVpcmUoJy4uL21lc3NhZ2VzJyk7XG5cbmNvbnN0IHsgdmFsaWRhdGVDb25maXJtYXRpb25Db2RlIH0gPSB2YWxpZGF0ZSxcbiAgICAgIHsgaW52YWxpZENvbmZpcm1hdGlvbkNvZGVNZXNzYWdlIH0gPSBtZXNzYWdlcztcblxuZnVuY3Rpb24gY29uZmlybWF0aW9uQ29kZUNhbGxiYWNrKG5leHQsIGRvbmUsIGNvbnRleHQpIHtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSAnQ29uZmlybWF0aW9uIGNvZGU6ICcsXG4gICAgICAgIHZhbGlkYXRpb25GdW5jdGlvbiA9IHZhbGlkYXRlQ29uZmlybWF0aW9uQ29kZSwgICAgICAgIFxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBpbnZhbGlkQ29uZmlybWF0aW9uQ29kZU1lc3NhZ2UsXG4gICAgICAgIGF0dGVtcHRzID0gMyxcbiAgICAgICAgaGlkZGVuID0gZmFsc2UsXG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAgIHZhbGlkYXRpb25GdW5jdGlvbjogdmFsaWRhdGlvbkZ1bmN0aW9uLFxuICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGF0dGVtcHRzOiBhdHRlbXB0cyxcbiAgICAgICAgICBoaWRkZW46IGhpZGRlblxuICAgICAgICB9O1xuXG4gIHByb21wdChvcHRpb25zLCBmdW5jdGlvbihjb25maXJtYXRpb25Db2RlKSB7XG4gICAgY29uc3QgdmFsaWQgPSAoY29uZmlybWF0aW9uQ29kZSAhPT0gbnVsbCk7XG5cbiAgICBpZiAodmFsaWQpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oY29udGV4dCwge1xuICAgICAgICBjb25maXJtYXRpb25Db2RlOiBjb25maXJtYXRpb25Db2RlXG4gICAgICB9KTtcblxuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb25lKCk7XG4gICAgfVxuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb25maXJtYXRpb25Db2RlQ2FsbGJhY2s7XG4iXX0=