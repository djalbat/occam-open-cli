"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return changeDirectory;
    }
});
const _necessary = require("necessary");
const _constants = require("./constants");
const _configuration = require("./configuration");
const { bottommostNameFromPath } = _necessary.pathUtilities;
function changeDirectory() {
    let directoryName = null, configurationFileExists = (0, _configuration.checkConfigurationFileExists)();
    if (!configurationFileExists) {
        const currentWorkingDirectoryPath = process.cwd(); ///
        process.chdir(_constants.DOUBLE_DOTS);
        const oldCurrentWorkingDirectoryPath = currentWorkingDirectoryPath; ///
        configurationFileExists = (0, _configuration.checkConfigurationFileExists)();
        if (configurationFileExists) {
            const bottommostOldCurrentWorkingDirectoryName = bottommostNameFromPath(oldCurrentWorkingDirectoryPath);
            directoryName = bottommostOldCurrentWorkingDirectoryName; ///
        } else {
            process.chdir(oldCurrentWorkingDirectoryPath);
        }
    }
    (0, _configuration.migrateConfigurationFile)();
    return directoryName;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jaGFuZ2VEaXJlY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5cbmltcG9ydCB7IERPVUJMRV9ET1RTIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvbkZpbGUsIGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uXCI7XG5cbmNvbnN0IHsgYm90dG9tbW9zdE5hbWVGcm9tUGF0aCB9ID0gcGF0aFV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2hhbmdlRGlyZWN0b3J5KCkge1xuICBsZXQgZGlyZWN0b3J5TmFtZSA9IG51bGwsXG4gICAgICBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBpZiAoIWNvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKSB7XG4gICAgY29uc3QgY3VycmVudFdvcmtpbmdEaXJlY3RvcnlQYXRoID0gcHJvY2Vzcy5jd2QoKTsgLy8vXG5cbiAgICBwcm9jZXNzLmNoZGlyKERPVUJMRV9ET1RTKTtcblxuICAgIGNvbnN0IG9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aCA9IGN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aDsgLy8vXG5cbiAgICBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICAgIGlmIChjb25maWd1cmF0aW9uRmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgYm90dG9tbW9zdE9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5TmFtZSA9IGJvdHRvbW1vc3ROYW1lRnJvbVBhdGgob2xkQ3VycmVudFdvcmtpbmdEaXJlY3RvcnlQYXRoKTtcblxuICAgICAgZGlyZWN0b3J5TmFtZSA9IGJvdHRvbW1vc3RPbGRDdXJyZW50V29ya2luZ0RpcmVjdG9yeU5hbWU7IC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmNoZGlyKG9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aCk7XG4gICAgfVxuICB9XG5cbiAgbWlncmF0ZUNvbmZpZ3VyYXRpb25GaWxlKCk7XG5cbiAgcmV0dXJuIGRpcmVjdG9yeU5hbWU7XG59XG4iXSwibmFtZXMiOlsiY2hhbmdlRGlyZWN0b3J5IiwiYm90dG9tbW9zdE5hbWVGcm9tUGF0aCIsInBhdGhVdGlsaXRpZXMiLCJkaXJlY3RvcnlOYW1lIiwiY29uZmlndXJhdGlvbkZpbGVFeGlzdHMiLCJjaGVja0NvbmZpZ3VyYXRpb25GaWxlRXhpc3RzIiwiY3VycmVudFdvcmtpbmdEaXJlY3RvcnlQYXRoIiwicHJvY2VzcyIsImN3ZCIsImNoZGlyIiwiRE9VQkxFX0RPVFMiLCJvbGRDdXJyZW50V29ya2luZ0RpcmVjdG9yeVBhdGgiLCJib3R0b21tb3N0T2xkQ3VycmVudFdvcmtpbmdEaXJlY3RvcnlOYW1lIiwibWlncmF0ZUNvbmZpZ3VyYXRpb25GaWxlIl0sIm1hcHBpbmdzIjoiQUFBQTs7OzsrQkFTQTs7O2VBQXdCQTs7OzJCQVBNOzJCQUVGOytCQUMyQztBQUV2RSxNQUFNLEVBQUVDLHNCQUFzQixFQUFFLEdBQUdDLHdCQUFhO0FBRWpDLFNBQVNGO0lBQ3RCLElBQUlHLGdCQUFnQixNQUNoQkMsMEJBQTBCQyxJQUFBQSwyQ0FBNEI7SUFFMUQsSUFBSSxDQUFDRCx5QkFBeUI7UUFDNUIsTUFBTUUsOEJBQThCQyxRQUFRQyxHQUFHLElBQUksR0FBRztRQUV0REQsUUFBUUUsS0FBSyxDQUFDQyxzQkFBVztRQUV6QixNQUFNQyxpQ0FBaUNMLDZCQUE2QixHQUFHO1FBRXZFRiwwQkFBMEJDLElBQUFBLDJDQUE0QjtRQUV0RCxJQUFJRCx5QkFBeUI7WUFDM0IsTUFBTVEsMkNBQTJDWCx1QkFBdUJVO1lBRXhFUixnQkFBZ0JTLDBDQUEwQyxHQUFHO1FBQy9ELE9BQU87WUFDTEwsUUFBUUUsS0FBSyxDQUFDRTtRQUNoQjtJQUNGO0lBRUFFLElBQUFBLHVDQUF3QjtJQUV4QixPQUFPVjtBQUNUIn0=